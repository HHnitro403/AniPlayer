<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="600"
             x:Class="AniPlayer.UI.OptionsPage">

    <UserControl.Styles>
        <Style Selector="Border.LibraryRow">
            <Setter Property="Background" Value="{DynamicResource BgCard}"/>
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.1"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="Border.LibraryRow:pointerover">
            <Setter Property="Background" Value="{DynamicResource BgElevated}"/>
        </Style>
    </UserControl.Styles>

    <ScrollViewer HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="32,24" Spacing="28" MaxWidth="700">

            <TextBlock Text="Settings" FontSize="24" FontWeight="SemiBold"/>

            <!-- Library Folders -->
            <StackPanel Spacing="8">
                <StackPanel Spacing="4">
                    <TextBlock Text="Library Folders" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimary}"/>
                    <Border Height="1" Background="{DynamicResource BorderSubtle}"/>
                </StackPanel>
                <TextBlock Text="Folders that AniPlayer scans for anime."
                           FontSize="13" Opacity="0.5" Foreground="{DynamicResource TextPrimary}"/>
                <StackPanel x:Name="LibraryFoldersList" Spacing="4"/>
                <Button x:Name="AddLibraryFolderButton"
                        Content="+ Add Folder" Padding="12,8"
                        Classes="Primary"
                        Click="AddLibraryFolderButton_Click"/>
            </StackPanel>

            <Separator/>

            <!-- Playback -->
            <StackPanel Spacing="8">
                <StackPanel Spacing="4">
                    <TextBlock Text="Playback" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimary}"/>
                    <Border Height="1" Background="{DynamicResource BorderSubtle}"/>
                </StackPanel>
                <Grid ColumnDefinitions="*,Auto" Margin="0,4">
                    <TextBlock Text="Auto-play next episode"
                               VerticalAlignment="Center" Foreground="{DynamicResource TextPrimary}"/>
                    <ToggleSwitch x:Name="AutoPlayToggle" Grid.Column="1"
                                  IsChecked="True"/>
                </Grid>
                <Grid ColumnDefinitions="*,Auto" Margin="0,4">
                    <TextBlock Text="Remember audio/subtitle track per series"
                               VerticalAlignment="Center" Foreground="{DynamicResource TextPrimary}"/>
                    <ToggleSwitch x:Name="RememberTracksToggle" Grid.Column="1"
                                  IsChecked="True"/>
                </Grid>
                <Grid ColumnDefinitions="*,Auto" Margin="0,4">
                    <StackPanel>
                        <TextBlock Text="Vsync"
                                   VerticalAlignment="Center" Foreground="{DynamicResource TextPrimary}"/>
                        <TextBlock Text="Syncs frames to monitor refresh rate. Disable if you experience stuttering."
                                   FontSize="12" Opacity="0.5" Foreground="{DynamicResource TextPrimary}"/>
                    </StackPanel>
                    <ToggleSwitch x:Name="VsyncToggle" Grid.Column="1"
                                  IsChecked="False"/>
                </Grid>
            </StackPanel>

            <Separator/>

            <!-- AniList -->
            <StackPanel Spacing="8">
                <StackPanel Spacing="4">
                    <TextBlock Text="AniList Integration" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimary}"/>
                    <Border Height="1" Background="{DynamicResource BorderSubtle}"/>
                </StackPanel>
                <TextBlock Text="Fetch metadata (covers, synopses, scores) from AniList."
                           FontSize="13" Opacity="0.5" Foreground="{DynamicResource TextPrimary}"/>
                <Grid ColumnDefinitions="*,Auto" Margin="0,4">
                    <TextBlock Text="Auto-fetch metadata for new series"
                               VerticalAlignment="Center" Foreground="{DynamicResource TextPrimary}"/>
                    <ToggleSwitch x:Name="AutoFetchToggle" Grid.Column="1"
                                  IsChecked="True"/>
                </Grid>
                <Button x:Name="FetchAllMetadataButton"
                        Content="Fetch All Missing Metadata" Padding="12,8"
                        Margin="0,4,0,0"
                        Classes="Primary"
                        Click="FetchAllMetadata_Click"/>
                <TextBlock x:Name="FetchStatusText"
                           FontSize="12" Opacity="0.5" Margin="0,2,0,0" Foreground="{DynamicResource TextPrimary}"/>
            </StackPanel>

            <Separator/>

            <!-- About -->
            <StackPanel Spacing="4">
                <StackPanel Spacing="4">
                    <TextBlock Text="About" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimary}"/>
                    <Border Height="1" Background="{DynamicResource BorderSubtle}"/>
                </StackPanel>
                <TextBlock Text="AniPlayer â€” Local Anime Media Player"
                           FontSize="13" Opacity="0.6" Foreground="{DynamicResource TextPrimary}"/>
                <TextBlock Text="Built with Avalonia + libmpv"
                           FontSize="12" Opacity="0.4" Foreground="{DynamicResource TextPrimary}"/>
            </StackPanel>
            
            <Separator/>

            <!-- Developer -->
            <StackPanel Spacing="8">
                <StackPanel Spacing="4">
                    <TextBlock Text="Developer" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimary}"/>
                    <Border Height="1" Background="{DynamicResource BorderSubtle}"/>
                </StackPanel>
                
                <Grid ColumnDefinitions="*,Auto" Margin="0,4">
                    <StackPanel>
                        <TextBlock Text="Enable Verbose Logging"
                                   VerticalAlignment="Center" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimary}"/>
                        <TextBlock Text="Enable to see detailed logs. This can impact performance."
                                   FontSize="12" Opacity="0.5" Foreground="{DynamicResource TextPrimary}"/>
                    </StackPanel>
                    <ToggleSwitch x:Name="MasterLogToggle" Grid.Column="1"/>
                </Grid>

                <StackPanel Margin="16,8,0,0" Spacing="8" IsEnabled="{Binding #MasterLogToggle.IsChecked}">
                    <TextBlock Text="Log Regions" FontSize="14" FontWeight="SemiBold" Opacity="0.8" Foreground="{DynamicResource TextPrimary}"/>
                    <Grid ColumnDefinitions="*,Auto">
                        <TextBlock Text="Scanner Logging"
                                   VerticalAlignment="Center" Foreground="{DynamicResource TextPrimary}"/>
                        <ToggleSwitch x:Name="ScannerLogToggle" Grid.Column="1"/>
                    </Grid>
                    <Grid ColumnDefinitions="*,Auto">
                        <TextBlock Text="Parser Logging"
                                   VerticalAlignment="Center" Foreground="{DynamicResource TextPrimary}"/>
                        <ToggleSwitch x:Name="ParserLogToggle" Grid.Column="1"/>
                    </Grid>
                    <Grid ColumnDefinitions="*,Auto">
                        <TextBlock Text="UI Logging"
                                   VerticalAlignment="Center" Foreground="{DynamicResource TextPrimary}"/>
                        <ToggleSwitch x:Name="UiLogToggle" Grid.Column="1"/>
                    </Grid>
                    <Grid ColumnDefinitions="*,Auto">
                        <TextBlock Text="Database Logging"
                                   VerticalAlignment="Center" Foreground="{DynamicResource TextPrimary}"/>
                        <ToggleSwitch x:Name="DbLogToggle" Grid.Column="1"/>
                    </Grid>
                    <Grid ColumnDefinitions="*,Auto" Margin="0,4,0,0">
                        <TextBlock Text="Progress Logging"
                                   VerticalAlignment="Center" Foreground="{DynamicResource TextPrimary}"/>
                        <ToggleSwitch x:Name="ProgressLogToggle" Grid.Column="1"/>
                    </Grid>
                </StackPanel>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</UserControl>
